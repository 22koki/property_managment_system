<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    /*<title>Rental Billing Statement Generator</title>*/
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5
    .15.3/css/all.min.css">
    
    <style>
        /* Custom CSS */
        body {
            background-color: #f8f9fa;
            font-family: 'Arial', sans-serif;
        }
        .container {
            max-width: 900px;
            margin-top: 50px;
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .statement-container {
            background-color: #ffffff;
            padding: 30px;
            margin-top: 50px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .statement-container h3 {
            margin-bottom: 20px;
        }
        .btn-primary, .btn-success, .btn-info, .btn-danger {
            width: 100%;
            margin-top: 15px;
        }
        .btn-primary {
            background-color: #4CAF50; /* Green */
            border-color: #4CAF50;
        }
        .btn-success {
            background-color: #008CBA; /* Blue */
            border-color: #008CBA;
        }
        .btn-info {
            background-color: #FFC107; /* Yellow */
            border-color: #FFC107;
        }
        .btn-danger {
            background-color: #f44336; /* Red */
            border-color: #f44336;
        }
        .table th, .table td {
            text-align: center;
        }
        header {
            text-align: left;
            margin-bottom: 30px;
            position: relative;
        }
        header .logo img {
            width: 120px;
            height: auto;
        }
        header h1 {
            margin-top: 10px;
            font-size: 2rem;
            color: #333;
        }
        header p {
            font-size: 1rem;
            color: #777;
        }
        .side-by-side {
            display: flex;
            justify-content: space-between;
        }
        .side-by-side .form-group {
            width: 48%;
        }
        .bottom-right {
            position: fixed;
            bottom: 10px;
            right: 20px;
            font-size: 1.2rem;
            font-weight: bold;
        }
        .balance-due {
            margin-top: 20px;}
 
/* Container for the Statement */
.statement-container {
    max-width: 800px;
    margin: 20px auto;
    background: #fff;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    margin-top: 50px;
}

.statement-container h3 {
    margin-bottom: 20px;
}

/* Header Styling */
/* Header Styling */
.statement-container header {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    background-color: #f9f9f9;
    padding: 20px;
    border-bottom: 2px solid #ccc;
}

.statement-container header .logo {
    flex: 0 0 auto; /* Ensure logo doesn't stretch */
    margin-right: 20px; /* Add some spacing to the right of the logo */
}

.statement-container header .logo img {
    max-width: 100px; /* Adjust size for better space-saving */
    height: auto;
}

.statement-container header .details {
    flex: 1 1 auto; /* Allow the details to take remaining space */
}

.statement-container header .details h1 {
    font-size: 24px;
    font-weight: bold;
    color: #333;
    margin: 5px 0;
}

.statement-container header .details p {
    font-size: 14px;
    color: #666;
    margin: 2px 0;
}

.statement-container header .details h2 {
    font-size: 10px;
    font-style: oblique;
    color: #0d63d3;
    margin-top: 2px;
}


/* Tenant and Property Info Styling */
.tenant-property-info {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
}

.tenant-info, .property-info {
    width: 48%;
    background: #f4f4f4;
    padding: 15px;
    border-radius: 5px;
    border: 1px solid #ddd;
}

.tenant-info h3, .property-info h3 {
    margin-bottom: 10px;
    font-size: 18px;
    font-weight: bold;
}

/* Account Activity Table */
.table {
    width: 100%;
    margin-top: 20px;
    border-collapse: collapse;
}

.table th, .table td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: center;
}

.table th {
    background-color: #f4f4f4;
    font-weight: bold;
}

/* Payment Details Section */
.payment-details {
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
}

.payment-method {
    width: 48%;
    padding: 15px;
    border: 2px solid #ddd;
    border-radius: 5px;
}

.payment-method.bank {
    background-color: #e0f7fa; /* Light blue */
}

.payment-method.mpesa {
    background-color: #e8f5e9; /* Light green */
}

.payment-method h4 {
    margin: 0 0 10px 0;
    font-size: 16px;
    font-weight: bold;
}

.payment-method p {
    margin: 5px 0;
    font-size: 14px;
}

/* Button Styling */
.btn-primary, .btn-success, .btn-info, .btn-danger {
    width: 100%;
    margin-top: 15px;
}

.btn-primary {
    background-color: #4CAF50; /* Green */
    border-color: #4CAF50;
}

.btn-success {
    background-color: #008CBA; /* Blue */
    border-color: #008CBA;
}

.btn-info {
    background-color: #FFC107; /* Yellow */
    border-color: #FFC107;
}

.btn-danger {
    background-color: #f44336; /* Red */
    border-color: #f44336;
}

/* Bottom Right Section */
.bottom-right {
    position: fixed;
    bottom: 10px;
    right: 20px;
    font-size: 1.2rem;
    font-weight: bold;
}

.balance-due {
    margin-top: 20px;
}

/* Footer Styling */
footer {
    text-align: center;
    margin-top: 20px;
    font-size: 12px;
    color: #666;
}

/* Responsive Design */
@media screen and (max-width: 768px) {
    .tenant-property-info, .payment-details {
        flex-direction: column;
    }

    .tenant-info, .property-info, .payment-method {
        width: 100%;
        margin-bottom: 15px;
    }

    .payment-method:last-child {
        margin-bottom: 0;
    }
}

/* Additional Styling for Form Elements */
.container {
    max-width: 900px;
    margin-top: 50px;
}

.form-group {
    margin-bottom: 1.5rem;
}

.side-by-side {
    display: flex;
    justify-content: space-between;
}

.side-by-side .form-group {
    width: 48%;
}

    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="/property_management/static/uploads/t.png" alt="ZURIPO Logo">
            </div>
            <h1>ZURIPO Property Specialists</h1>
            <p>Location: Garden Estate, Off Northern Bypass, Nairobi</p>
            <p>Phone: +254 792 262 000 | Email: info@zuripoproperties.co.ke</p>
            <h2>We Manage, We Rent, We Sell</h2>
        </header>

     

        <!-- Form for input -->
        <form id="billingForm">
            <!-- Tenant and Property Info -->
            <fieldset class="mb-4">
                <legend>Tenant and Property Information</legend>
                <div class="side-by-side">
                    <div class="form-group">
                        <input type="text" class="form-control" id="tenantName" placeholder="Tenant Name" required>
                    </div>
                    
                    <div class="form-group">
                        <input type="text" class="form-control" id="tenantLocation" placeholder="Location" required>
                    </div>
                </div>
                <div class="side-by-side">
                    <div class="form-group">
                        <input type="text" class="form-control" id="tenantPhone" placeholder="Phone" required>
                    </div>
                    <div class="form-group">
                        <input type="email" class="form-control" id="tenantEmail" placeholder="Email" required>
                    </div>
                </div>
                <div class="side-by-side">
                    <div class="form-group">
                        <input type="text" class="form-control" id="propertyLocation" placeholder="Property Location" required>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" id="propertyOwner" placeholder="Property Owner" required>
                    </div>
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" id="HouseNo" placeholder="House Number" required>
                </div>
            </fieldset>

 <!-- Account Activity -->
<fieldset class="mb-4">
    <legend>Account Activity</legend>
    <table class="table table-bordered" id="activityTable">
        <thead>
            <tr>
                <th>Date</th>
                <th>Reference</th>
                <th>Description</th>
                <th>Debit (Ksh)</th>
                <th>Credit (Ksh)</th>
                <th>Amount (Ksh)</th>
                <th>Actions</th> <!-- Column for add/remove buttons -->
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="text" class="form-control" placeholder="Date" required></td>
                <td><input type="text" class="form-control" placeholder="Reference" required></td>
                <td><input type="text" class="form-control" placeholder="Description" required></td>
                <td><input type="number" class="form-control" placeholder="Debit (Ksh)" required></td>
                <td><input type="number" class="form-control" placeholder="Credit (Ksh)" required></td>
                <td><input type="number" class="form-control" placeholder="Amount (Ksh)" required></td>
                <td>
                    <button type="button" class="btn btn-success btn-sm add-row">+</button>
                    <button type="button" class="btn btn-danger btn-sm remove-row">-</button>
                </td>
            </tr>
        </tbody>
    </table>
</fieldset>
            <!-- Payment Info -->
            <fieldset class="mb-4">
                <legend>Payment Information</legend>
                <div class="form-group">
                    <input type="text" class="form-control" id="bankName" placeholder="Bank Name" required>
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" id="accountNumber" placeholder="Account Number" required>
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" id="mpesaPaybill" placeholder="M-Pesa Paybill" required>
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" id="mpesaAccount" placeholder="Bank Account Number " required>
                </div>
            </fieldset>

            <!-- Button to generate statement -->
            <button type="button" class="btn btn-primary" onclick="generateStatement()">Generate Statement</button>
        </form>
    </div>

    <!-- Statement Preview Section -->
    <div class="container statement-container" id="statementPreview" style="display: none;">
        <header>
            <div class="header-top">
                <div class="logo">
                    <img src="/property_management/static/uploads/t.png" alt="ZURIPO Logo">
                </div>
                <div class="company-details">
                    <h1>ZURIPO Property Specialists</h1>
                    <p>Location: Garden Estate, Off Northern Bypass, Nairobi</p>
                    <p>Phone: +254 792 262 000 | Email: info@zuripoproperties.co.ke</p>
                    <h2>We Manage, We Rent, We Sell</h2>
                </div>
            </div>
        </header>
    
        <div class="tenant-property-info">
            <div class="tenant-info">
                <h3>Tenant Information</h3>
                <p><strong>Name:</strong> <span id="tenantNamePreview"></span></p>
                <p><strong>Location:</strong> <span id="tenantLocationPreview"></span></p>
                <p><strong>Phone:</strong> <span id="tenantPhonePreview"></span></p>
                <p><strong>Email:</strong> <span id="tenantEmailPreview"></span></p>
                <p><strong>House No:</strong> <span id="tenantHouseNoPreview"></span></p>
            
            </div>
            <div class="property-info">
                <h3>Property Information</h3>
                <p><strong>Location:</strong> <span id="propertyLocationPreview"></span></p>
                <p><strong>Owner:</strong> <span id="propertyOwnerPreview"></span></p>
            </div>
        </div>
    
        <div id="statementOutput"></div>
    
       
    
        <div class="account-summary">
            <h3>Account Activity</h3>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Reference</th>
                        <th>Description</th>
                        <th>Debit (Ksh)</th>
                        <th>Credit (Ksh)</th>
                        <th>Amount (Ksh)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span id="activityDate"></span></td>
                        <td><span id="activityRef"></span></td>
                        <td><span id="activityDesc"></span></td>
                        <td><span id="activityDebit"></span></td>
                        <td><span id="activityCredit"></span></td>
                        <td><span id="activityAmount"></span></td>
                    </tr>
                </tbody>
            </table>
            <div class="payment-details">
                <h3>Please Make Payment To:</h3>
                <div class="payment-method bank">
                    <h4>Via Bank</h4>
                    <p><strong>Bank Name:</strong> <span id="bankNamePreview"></span></p>
                    <p><strong>Account Number:</strong> <span id="accountNumberPreview"></span></p>
                </div>
                <div class="payment-method mpesa">
                    <h4>Via M-Pesa</h4>
                    <p><strong>Paybill:</strong> <span id="mpesaPaybillPreview"></span></p>
                    <p><strong>Account Name:</strong> <span id="mpesaAccountPreview"></span></p>
                </div>
            </div>
            <div class="top-right">
                <p><strong>Due Date:</strong> <span id="dueDate"></span></p>
                <p><strong>House No:</strong> <span id="houseNo"></span></p>
            </div>
        </div>
    
        <div class="final-summary">
            <p><strong>Due Date:</strong> <span id="dueDate"></span></p>
            <p><strong>Balance Due:</strong> <span id="finalBalance"></span></p>
        </div>
    </div>
    
    <script>
      function generateStatement() {
    // Fetch values from the input table
    const activityTable = document.getElementById('activityTable').getElementsByTagName('tbody')[0];
    const statementOutput = document.querySelector('#statementPreview .account-summary tbody');

    // Clear the preview table to avoid duplication
    statementOutput.innerHTML = '';

    // Loop through each row in the input table
    Array.from(activityTable.rows).forEach(row => {
        const activityDate = row.cells[0].querySelector('input').value;
        const activityRef = row.cells[1].querySelector('input').value;
        const activityDesc = row.cells[2].querySelector('input').value;
        const activityDebit = row.cells[3].querySelector('input').value;
        const activityCredit = row.cells[4].querySelector('input').value;
        const activityAmount = row.cells[5].querySelector('input').value;

        // Create a new row in the output table
        const newRow = document.createElement('tr');
        newRow.innerHTML = `
            <td>${activityDate}</td>
            <td>${activityRef}</td>
            <td>${activityDesc}</td>
            <td>${activityDebit}</td>
            <td>${activityCredit}</td>
            <td>${activityAmount}</td>
        `;

        // Append the row to the preview table
        statementOutput.appendChild(newRow);
    });

    // Fetch and preview other form values
    const tenantName = document.getElementById('tenantName').value;
    const tenantLocation = document.getElementById('tenantLocation').value;
    const tenantPhone = document.getElementById('tenantPhone').value;
    const tenantEmail = document.getElementById('tenantEmail').value;
    const propertyLocation = document.getElementById('propertyLocation').value;
    const propertyOwner = document.getElementById('propertyOwner').value;

    const bankName = document.getElementById('bankName').value;
    const accountNumber = document.getElementById('accountNumber').value;
    const mpesaPaybill = document.getElementById('mpesaPaybill').value;
    const mpesaAccount = document.getElementById('mpesaAccount').value;

    const houseNo = document.getElementById('houseNo').value;
    const dueDate = new Date().toLocaleDateString();

    // Calculate balance
    let totalDebit = 0, totalCredit = 0;
    Array.from(activityTable.rows).forEach(row => {
        totalDebit += parseFloat(row.cells[3].querySelector('input').value) || 0;
        totalCredit += parseFloat(row.cells[4].querySelector('input').value) || 0;
    });
    const balanceDue = totalDebit - totalCredit;

    // Update summary values
    document.getElementById('tenantNamePreview').textContent = tenantName;
    document.getElementById('tenantLocationPreview').textContent = tenantLocation;
    document.getElementById('tenantPhonePreview').textContent = tenantPhone;
    document.getElementById('tenantEmailPreview').textContent = tenantEmail;

    document.getElementById('propertyLocationPreview').textContent = propertyLocation;
    document.getElementById('propertyOwnerPreview').textContent = propertyOwner;

    document.getElementById('bankNamePreview').textContent = bankName;
    document.getElementById('accountNumberPreview').textContent = accountNumber;
    document.getElementById('mpesaPaybillPreview').textContent = mpesaPaybill;
    document.getElementById('mpesaAccountPreview').textContent = mpesaAccount;

    document.getElementById('dueDate').textContent = dueDate;
    document.getElementById('houseNo').textContent = houseNo;
    document.getElementById('finalBalance').textContent = balanceDue.toFixed(2);

    // Show the statement preview
    document.getElementById('statementPreview').style.display = 'block';
}


        function downloadPDF() {
    const doc = new jsPDF();
    doc.text("Rental Billing Statement", 10, 10);
    // Add dynamic data here
    doc.save("BillingStatement.pdf");

    // Function to create a new row
function createNewRow() {
    const row = document.createElement('tr');
    row.innerHTML = `
        <td><input type="text" class="form-control" placeholder="Date" required></td>
        <td><input type="text" class="form-control" placeholder="Reference" required></td>
        <td><input type="text" class="form-control" placeholder="Description" required></td>
        <td><input type="number" class="form-control" placeholder="Debit (Ksh)" required></td>
        <td><input type="number" class="form-control" placeholder="Credit (Ksh)" required></td>
        <td><input type="number" class="form-control" placeholder="Amount (Ksh)" required></td>
        <td>
            <button type="button" class="btn btn-success btn-sm add-row">+</button>
            <button type="button" class="btn btn-danger btn-sm remove-row">-</button>
        </td>
    `;
    return row;
}

// Add row event handler
document.addEventListener('click', function (event) {
    const table = document.getElementById('activityTable').getElementsByTagName('tbody')[0];

    // Add a new row
    if (event.target && event.target.classList.contains('add-row')) {
        const newRow = createNewRow(); // Create the new row
        table.appendChild(newRow); // Append the new row to the table
    }

    // Remove a row
    if (event.target && event.target.classList.contains('remove-row')) {
        const row = event.target.closest('tr');
        const rowCount = table.rows.length;
        if (rowCount > 1) { // Ensure at least one row remains
            row.remove();
        } else {
            alert('You must have at least one row.');
        }
    }
});

// Automatically add a new row when pressing "Enter" after filling the last input field
document.getElementById('activityTable').addEventListener('keydown', function (event) {
    const lastRow = this.querySelector('tbody tr:last-child');
    const inputs = lastRow.querySelectorAll('input');
    
    // Check if the "Enter" key was pressed and if the last input field is focused
    if (event.key === 'Enter') {
        const lastInput = inputs[inputs.length - 1];
        
        // If the last input is focused, add a new row
        if (document.activeElement === lastInput && lastInput.value !== '') {
            const newRow = createNewRow(); // Create the new row
            this.querySelector('tbody').appendChild(newRow); // Append the new row to the table
        }
    }
});
}

    </script>
    
</body>
</html>